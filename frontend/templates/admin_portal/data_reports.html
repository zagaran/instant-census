{% extends "base.html" %}

{% block title %}Data Reports | Instant Census{% endblock %}

{% block head %}
    <link rel="stylesheet" type="text/css" href="/static/css/data_reports.css">
    <link rel="stylesheet" type="text/css" href="/static/css/libraries/nv.d3.min.css">
{% endblock %}

{% block javascript %}
    <script>
        var TIMEZONE = "{{ timezone }}";
        var COHORTS = {{ cohorts | safe }};
        var JAVASCRIPT_NULL_VALUE = "{{ JAVASCRIPT_NULL_VALUE }}";
        var SKIP_VALUE = "{{ SKIP_VALUE }}";
    </script>
    <script type="text/javascript" src="/static/javascript/libraries/moment.min.js"></script>
    <script type="text/javascript" src="/static/javascript/libraries/moment-timezone-with-data.min.js"></script>
    <script type="text/javascript" src="/static/javascript/libraries/d3.min.js"></script>
    <script type="text/javascript" src="/static/javascript/libraries/nv.d3.min.js"></script>
    <script type="text/javascript" src="/static/javascript/data_reports.js"></script>
{% endblock %}

{% block actions %}
{% endblock %}

{% block content %}
    <div id="data-reports-container" class="container">
        <p><b>Current timezone:</b> {{ timezone }}</p>
        <hr />
        <div id="messages-panel" class="panel panel-primary">
            <div class="panel-heading">
                <h4>Text Messages Sent and Received</h4>
            </div>
            <div class="panel-body">
                <div class="options">
                    <b>View Options:</b>
                    <div class="pull-right">
                        <button class="btn btn-primary messages-view-option" value="day" data-text="View Past Day">View Past Day</button>
                        <button class="btn btn-primary messages-view-option" value="week" data-text="View Past Week">View Past Week</button>
                        <button class="btn btn-primary messages-view-option" value="month" data-text="View Past Month">View Past Month</button>
                        <button class="btn btn-primary messages-view-option" value="year" data-text="View Past Year">View Past Year</button>
                    </div>
                </div>
                <hr />
                <div class="loading">
                    <span class="glyphicon glyphicon-refresh spinning"></span> Generating Report...
                </div>
                <div class="svg-container">
                    <svg id="messages-svg"></svg>
                </div>
            </div>
        </div>
        <div id="users-panel" class="panel panel-primary">
            <div class="panel-heading">
                <h4>User Attributes</h4>
            </div>
            <div class="panel-body">
                <div class="options">
                    <b>View Options:</b>
                    <div class="pull-right form-inline indent-2">
                        <label for="users-attribute-option">Attribute:</label>
                        <select id="users-attribute-option" class="indent-1 form-control"></select>
                    </div>
                    <div class="pull-right form-inline">
                        <label for="users-cohort-option">Cohort:</label>
                        <select id="users-cohort-option" class="indent-1 form-control"></select>
                    </div>
                </div>
                <hr />
                <div class="pull-right">
                    <b>Total number of users:</b> <span id="users-total">--</span>
                </div>
                <br />
                <div class="loading">
                    <span class="glyphicon glyphicon-refresh spinning"></span> Generating Report...
                </div>
                <div class="svg-container">
                    <svg id="users-svg"></svg>
                </div>
            </div>
        </div>
        <div id="response-time-panel" class="panel panel-primary">
            <div class="panel-heading">
                <h4>Response Time Report</h4>
            </div>
            <div class="panel-body">
                <div class="pull-right">
                    <b>Total number of questions sent:</b> <span id="questions-total">--</span>
                </div>
                <br />
                <div class="loading">
                    <span class="glyphicon glyphicon-refresh spinning"></span> Generating Report...
                </div>
                <div class="svg-container">
                    <svg id="response-time-svg"></svg>
                </div>
            </div>
        </div>
        <div id="responses-panel" class="panel panel-primary">
            <div class="panel-heading">
                <h4>Question/Response Report</h4>
            </div>
            <div class="panel-body">
                <div class="options">
                    <b>View Options:</b>
                    <div class="pull-right form-inline indent-2">
                        <label for="responses-question-option">Question:</label>
                        <select id="responses-question-option" class="indent-1 form-control"></select>
                    </div>
                    <div class="pull-right form-inline">
                        <label for="responses-cohort-option">Cohort:</label>
                        <select id="responses-cohort-option" class="indent-1 form-control"></select>
                    </div>
                </div>
                <hr />
                <div class="loading">
                    <span class="glyphicon glyphicon-refresh spinning"></span> Generating Report...
                </div>
                <div class="svg-container">
                    <svg id="responses-svg"></svg>
                </div>
            </div>
        </div>
    </div>
{% endblock %}